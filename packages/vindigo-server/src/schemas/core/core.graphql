type Query {

	"Fetch the relevant client config"
	config: ClientConfig!

	"Fetch the user details of the current user"
	profile: Profile

	"Fetch a user by their id"
    profileById(id: Int): Profile

    "Fetch a user by their username"
    profileByName(username: String): Profile

    "Perform a search query"
    search(query: String!): SearchResult!
}

type Mutation {

	"Create a new user account"
    register(details: UserRegistration): Profile

    "Sign in with the given account details"
    authenticate(details: UserAuthentication): Profile

    "Verify the account with the given verification code"
    verifyAccount(code: String!): Boolean!

    "Updates various user profile fields"
    updateProfile(details: ProfileUpdate): Profile!

    "Sign out and return if this was successful"
    signOut: Boolean
}

type Subscription {
	_placeholder: Boolean
}

"""
The details required to register a new account
"""
input UserRegistration {
    fullname: String!
    email: String!
    password: String!
    remember: Boolean!
}

"""
The details required to sign in
"""
input UserAuthentication {
    identity: String!
    password: String!
    remember: Boolean!
}

"""
The details required to update a existing user
"""
input ProfileUpdate {
    fullname: String
    email: String
    username: String
    bio: String
    website: String
}

"""
Configuration block holding values relevant to the client.
The client config should be queried on application launch
and provide hints about authentication, UI, and more.
"""
type ClientConfig {

	"The name of the current Vindigo instance"
	instanceName: String!

    "Whether the instance is in maintenance mode"
    maintenance: Boolean!

	"Whether registrations are open"
	allowRegister: Boolean!

	"Whether anonymous users are allowed"
	allowAnonymous: Boolean!

    "Whether email verification is enabled"
    verification: Boolean!

    "The color palette for use in color pickers"
    colorPalette: [String!]!
}

"""
Represents a single Vindigo user
"""
type Profile {
    
    "The unique user id"
    id: Int!

    "The slug used to refer to this profile"
    slug: String!

    "The user avatar path, may be null"
    avatar: String

    "The full name of the user"
    fullName: String! 

    "The first name of the user"
    firstName: String!

    "The public email address, may be null"
    email: String

    "The username of the user"
    username: String!

    "The full URL of the users profile"
    profileUrl: String!

    "The bio of the users profile"
    bio: String

    "The website of the user"
    website: String

    "The role of the user"
    role: String!

    "The date the user was created"
    createdAt: String!

    "Whether the user has verified their account"
    isVerified: Boolean!
}

"""
A collection of search results gathered by
searching a given query string. Other schemas
can provide additional searchable models.
"""
type SearchResult {
	users: [Profile!]!
}